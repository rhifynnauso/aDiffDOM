<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>tree based DOM diffs</title>
    <style>
      #t1, #t2 {
        border: 1px solid black;
        margin-bottom: 1em;
      }
    </style>
    <script src="require.js"></script>
  </head>
  <body>

    <!--
      Test elements for diffing
    -->

    <div id="t1">
        <h2>What is dom-diff</h2>
        <p>This is a thing</p>
        <p>This is also athing</p>
    </div>

    <div id="t2">
      <h2>how to use dom-diff</h2>
      <p><code>//some code here</code></p>
    </div>

    <div id="result"></div>

    <!--
      Test this library
    -->
    <script>
      require(["DOMdiff", "markSubTrees", "applyDiff"], function(DOMdiff, markSubTrees, applicator) {
        /*
        var t1 = document.getElementById("a1");
        var t2 = document.getElementById("a2");

        var subtrees = markSubTrees(t1, t2);

        DOMdiff.findDiff(t1,t2)
        var diffs = DOMdiff.diffTracker.diffInformation;
        console.log(diffs);

        var t3 = t1.cloneNode(true);
        applicator.applyDiff(diffs, t3);
        document.body.appendChild(t3);
        console.log(t3);
        */

        var a = document.createElement('div');
        a.innerHTML='hello<span>hull<i>a</i></span>';

        var b = document.createElement('div');
        b.innerHTML='hello<span>tull<i>a</i></span>';

        var subtrees = markSubTrees(a,b);
        DOMdiff.findDiff(a,b);
        var diffs = DOMdiff.diffTracker.diffInformation;
        console.log(diffs);

        applicator.applyDiff(diffs, b);
        console.log(b);

      });
    </script>
  </body>
</html>
