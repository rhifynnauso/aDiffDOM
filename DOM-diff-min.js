(function(){function e(e){return e!==null&&e!==undefined}function t(e){return Array.prototype.slice.call(e)}function n(e){if(e===null||e===undefined)return 0;var t=0,n,r=e.length;for(n=0;n<r;++n){t=t*31+e.charCodeAt(n)&4294967295}return t}function r(t){var i,s=e(t.childNodes)?t.childNodes.length:0,o=0,u=t.nodeName;if(t.attributes){var a,f,l=t.attributes,c=l.length;for(f=0;f<c;f++){a=l[f];u+=a.nodeName+":"+a.nodeValue}}o=n((u+t.textContent).replace(/\s+/g,""));for(i=s-1;i>=0;i--){o=o*31+r(t.childNodes[i])&4294967295}t.hashCode=o;return o}function i(e,t){var n=[];if(e.nodeType===1&&t.nodeType===1){if(e.nodeName!==t.nodeName){n.push(["nodeName",e.nodeName,t.nodeName])}}if(e.attributes&&t.attributes){var r=e.attributes,i=r.length,s,o,u,a;for(s=0;s<i;s++){a=r[s].nodeName;o=e.getAttribute(a);u=t.getAttribute(a);if(o==u)continue;n.push([a,o,u])}r=t.attributes;i=r.length;for(s=0;s<i;s++){a=r[s].nodeName;o=e.getAttribute(a);u=t.getAttribute(a);if(o==u)continue;n.push([a,o,u])}}return n}function o(e,t){var n=t.hashCode,r,i=e.length,s,o=[];for(r=0;r<i;r++){s=e[r];if(s.hashCode===n){o.push(r)}}return o}function u(e,n){e=t(e);n=t(n);var r=[],i=[],s=[];var u,a=e.length,f,l,c,h;for(u=0;u<a;u++){f=e[u];c=o(n,f);if(c.length===0)continue;if(c.length>1)continue;h=c[0];if(u!==h&&o(e,f).length<=1){r.push([u,h]);f["marked"]=true;n[h]["marked"]=true}else if(u===h){f["marked"]=true;n[h]["marked"]=true}}a=n.length;for(u=0;u<a;u++){f=n[u];if(!f["marked"]){s.push([u,f])}}a=e.length;for(u=0;u<a;u++){f=e[u];if(!f["marked"]){i.push([u,f])}}var p={relocations:r,insertions:i,removals:s};return p}function a(e,t,n){var r=n&&n.length!==0?n.splice(0,1)[0]:0;if(r===-1){return 0}if(e.nodeType!==t.nodeType){return-1}if(e.nodeType===3&&t.nodeType===3){if(e.textContent.trim()!=t.textContent.trim()){return-1}return 0}if(e.nodeName!==t.nodeName){return-1}if(e.childNodes.length!==t.childNodes.length){return-1}var i,s=e.childNodes.length,o,u;for(i=r;i<s;i++){o=a(e.childNodes[i],t.childNodes[i],n);if(o!==0){return[i].concat(o)}}var f=["id","style","class","type","value","href","src","rel","__more__attributes__here__"],l,s=f.length,c,h,p;for(l=0;l<s;l++){c=f[l];h=e.getAttribute(c);p=t.getAttribute(c);if(h==p||!h&&p==""||!p&&h=="")continue;return-1}return 0}function f(e,t){var n=a(e,t),r=[n],i;while(typeof n==="object"){i=a(e,t,n.slice());r.push(i);n=i}if(r.length>1){r.splice(r.indexOf(0),1)}return r}function l(e,t){var t=t.slice(),n=t.splice(0,1)[0];while(n!==-1){e=e.childNodes[n];n=t.splice(0,1)[0]}return e}function c(t,n,r){t=t.slice();var o,u,a,f=t.length,c,h=[],p,d,v;if(f===1&&t[0]===0){return}for(a=0;a<f;a++){if(t[a]===0){continue}if(t[a]===-1){t[a]=[-1]}o=t[a].slice();u=t[a].slice();p=o.splice(0,1)[0];d=n;v=r;while(p!==-1){d=d.childNodes[p];v=v.childNodes[p];p=o.splice(0,1)[0]}if(d.nodeType===3&&v.nodeType===3){h.push(function(t,n){return function(){t.nodeValue=n}}(v,d.nodeValue));continue}var m=s(d,v),g,y,b,w=i(d,v);if(w.length>0){y=w.length;for(g=0;g<y;g++){b=w[g];if(b[0]==="nodeName"){h.push(function(t,n){return function(){while(t.childNodes.length>0){n.appendChild(t.childNodes[0])}n.attributes=t.attributes;t.parentNode.replaceChild(n,t)}}(l(r,u),document.createElement(b[1])))}else{h.push(function(n,r,i){return function(){if(e(i)){n.setAttribute(r,i)}else{n.removeAttribute(r)}}}(l(r,u),b[0],b[1]))}}}if(!m){continue}y=m.removals.length;if(y>0){for(g=y-1;g>=0;g--){b=m.removals[g];h.push(function(t){return function(){var n=t.parentNode;n.removeChild(t)}}(l(r,u).childNodes[b[0]]));for(var E=0;E<m.relocations.length;E++){var S=m.relocations[E];if(S[1]>=b[0]){S[1]--}}}}y=m.insertions.length;if(y>0){for(g=y-1;g>=0;g--){b=m.insertions[g];var x=l(r,u);h.push(function(t,n,r){return function(){t.insertBefore(n,r)}}(x,b[1],x.childNodes[b[0]]));for(var E=0;E<m.relocations.length;E++){var S=m.relocations[E];if(S[1]>=b[0]){S[1]++}}}}y=m.relocations.length;if(y>0){}}return h}var s=function(e,n){r(e);r(n);c1=t(e.childNodes);c2=t(n.childNodes);var i=u(c1,c2);return i.insertions.length>0||i.removals.length>0?i:false};var h={outerEquality:i,innerEquality:s,getDiff:f,applyDiff:function(e,t,n){var r=c(e,t,n);if(r){r=r.reverse();r.forEach(function(e){e()})}}};if(window.define){define(function(){return h})}else{window.DOMdiff=h}}());
