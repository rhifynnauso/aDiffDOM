<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>DOMdiff</title>
<script src="TraceLogger.js">
</script>
<script src="DOMdiff.js">
</script>
</head>
<body>
<!-- Add all divs to be compared here two by two -->

  <div>lol<span>ydew<i>hey</i>de</span></div>
  <div>lol<p>ydew<b>hey</b>de</p></div>

  <div><p>hello <span>finger</span></p></div>
  <div><p>hello <span>fingers</span>. Welcome!</p></div>


  <div><span><p>tello</p><p></p></span></div>
  <div><span><p>fello</p><p></p></span></div>

  <div><img></div> 
  <div><i><i><img><p></p></i><span><p><p></p></p></span></i><b></b></div>


  <script>


    var dd = new DOMdiff(),
        tl = new TraceLogger(dd), 
        divs, diffs, t1, i;

    divs = document.querySelectorAll('div');

    for (i = 0; i < divs.length; i=i+2) {


      try {
        diffs = dd.diff(divs[i], divs[i+1]);
        console.log("diff operations for div #"+i+" -> div #"+(i+1)+"\n");

        console.log("\n", "applying...");
        t1 = divs[i].cloneNode(true);
        dd.apply(t1, diffs);

        if (t1.innerHTML===divs[i+1].innerHTML) {
            console.log('...success!');
        } else {
            console.log(diffs);
            console.log(t1.outerHTML);
            console.log(divs[i+1].outerHTML);
            throw 'Outputs not matching';
        }

        console.log("\n", "undoing...");
        dd.undo(t1, diffs);

        if (t1.innerHTML===divs[i].innerHTML) {
            console.log('...success!');
        } else {
            console.log(diffs);
            console.log(t1.outerHTML);
            console.log(divs[i].outerHTML);
            throw 'Outputs not matching';
        }

      } catch (e) {
        console.log("error occured\n", e.toString());
        console.log(tl.toString());
        throw e;
      }
    }
  </script>

</body>
</html>
